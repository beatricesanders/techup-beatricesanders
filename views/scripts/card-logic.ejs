<script>

// Load in database from server
var db = JSON.parse('<%-JSON.stringify(card_db)%>');

// Flip card animation 
function flipCard(card_no) {
    document.getElementById(card_no).classList.toggle("flipped");
    document.getElementById(card_no + '-q').classList.toggle("flipped");
    document.getElementById(card_no + '-footer').classList.toggle("flipped");

    setTimeout(function(){changeCard(card_no)},300);
}

// Get and print random card from database 
function changeCard(card_no) {
    rand = Math.floor(Math.random()* "<%= card_db.length %>") ;
    
    theme_icon = getThemeIcon(db[rand].theme)
    heat_icon = "<img class = 'theme-icon' src = 'images/heat_"+db[rand].heat+".svg'>"

    document.getElementById(card_no + '-q').innerHTML = db[rand].question;
    document.getElementById(card_no + '-heat').innerHTML = heat_icon;
    document.getElementById(card_no + '-theme').innerHTML = db[rand].theme + " "+ theme_icon;
    document.getElementById(card_no + '-id').innerHTML = db[rand].id;
}

// Load all cards
function loadAllCards(card_no) {
    changeCard('card1')
    changeCard('card2')
}


// switch function for theme icons
function getThemeIcon(theme) {

    var theme_icon = ""

    switch(theme) {
        case "Food":
            theme_icon = "<img class = 'theme-icon' src = 'images/food.svg'>";
            break;
        case "Nostalgia":
        theme_icon = "<img class = 'theme-icon' src = 'images/nostalgia.svg'>";
            break;
        case "Life & Career":
        theme_icon = "<img class = 'theme-icon' src = 'images/career.svg'>";
            break;
        case "Hobbies & Habits":
        theme_icon = "<img class = 'theme-icon' src = 'images/career.svg'>";
            break;
        default:
        theme_icon = "";
        };

    return(theme_icon);

}

</script>
  

